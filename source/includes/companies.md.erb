# Companies

## Get All Companies `root`
<!-- > Example Request Body -->

<%= partial "/includes/companies/getData.md.erb"%>

This endpoint retrieves all companies.
### HTTP Request
<span class="method-get">GET</span> `/v1/companies`

### Query Parameters
Parameter | Default | Description
--------- | ------- | -----------
sortBy | id | TBD.
filterBy | N/A | TBD.

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden
User  | Forbidden

## Create a Company `root`

> Example Request Body

```json
{
  "data": {
    "name": "company9",
    "email": "info@company9.com",
    "address": "Taipei City",
    "invoiceAddress": "4 .Invoice Address",
    "deliveryAddress": "5 .Delivery Address",
    "tel": "027877878",
    "vatNumber": "234569876",
    "webSite": "https://www.apple.com",
    "image": "image",
    "taxRate": 0.05,
    "profit": 0.3,
    "owner": "Jobs",
    "fax": "0233938888"
  }
}
```

> Example Response Body

```json
{
  "status": {
    "status": 201,
    "message": "Created"
  },
  "data": {
    "id": "944735b5-b8dd-42a8-8307-18ba30414e63",
    "name": "company9",
    "email": "info@company9.com",
    "address": "Taipei City",
    "invoiceAddress": "4 .Invoice Address",
    "deliveryAddress": "5 .Delivery Address",
    "tel": "027877878",
    "vatNumber": "234569876",
    "webSite": "https://www.apple.com",
    "image": "image",
    "taxRate": 0.05,
    "profit": 0.3,
    "owner": "Jobs",
    "fax": "0233938888",
    "updatedAt": "2020-02-22T13:38:49.797Z",
    "createdAt": "2020-02-22T13:38:49.797Z"
  }
}
```

This endpoint creates a company.
### HTTP Request
<span class="method-post">POST</span> `/v1/companies`

<%= partial "/includes/companies/requestParameters.md.erb"%>

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.

<aside class="notice">
About the <code>profit</code> field
The default <code>standardPrice</code> of <code>Product</code> should be <code>(productCost/profit) * 100%</code>.
</aside>

## Get a Specific Company `root`

<%= partial "/includes/companies/getOne.md.erb"%>

This endpoint retrieves a specific company.
### HTTP Request
<span class="method-get">GET</span> `/v1/companies/:companyId`

### Access Permission
Role | Scope
---- | -----
Root | Full permission
Admin | Can only retrieve company which <code>id</code> same as admin's <code>companyId</code>.
User  | Can only retrieve company which <code>id</code> same as user's <code>companyId</code>.

<aside class="warning">
If you are not rooot, no matter the <code>&lt;companyId&gt;</code> you pass at url prameter, you can only get the company which <code>&lt;companyId&gt;</code> same as yours
</aside>

## Update a Specific Company `root`

<%= partial "/includes/companies/updateData.md.erb"%>

This endpoint updates a specific company.
### HTTP Request
<span class="method-patch">PATCH</span>`/v1/companies/:companyId`

<%= partial "/includes/companies/requestParameters.md.erb"%>

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.


## Delete a Specific Company `root`

<%= partial "/includes/common/deleteResponse.md.erb"%>

This endpoint deletes a specific company.
### HTTP Request
<span class="method-delete">DELETE</span>`/v1/companies/:companyId`

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.


## Get Users from a Specific Company `root`

<%= partial "/includes/users/getData.md.erb"%>

This endpoint get users from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/users`

### Query Parameters
Parameter | Default | Description
--------- | ------- | -----------
TBD | false | TBD.
TBD | true | TBD.

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.


## Create an Admin for a Specific Company `root`

> Example Request Body

```json
{
  "data": {
    "name": "Kong",
    "email": "user9@company9.com",
    "phone": "55 phone",
    "mobile": "+886952318999",
    "fax": "+886952318999",
    "image": "K",
    "title": "CTO",
    "address": "address",
    "password": "1234567890"
  }
}
```

> Example Response Body

```json
{
  "status": {
    "status": 201,
    "message": "Created"
  },
  "data": {
    "id": "a60da46e-b841-4611-b47b-c0379f330192",
    "name": "Kong",
    "email": "user9@company9.com",
    "phone": "55 phone",
    "mobile": "+886952318999",
    "fax": "+886952318999",
    "image": "K",
    "title": "CTO",
    "address": "address",
    "password": "$2a$12$5.aRA6V/ZtA.z60qWZBFEONretbD/KVcuLouZQYFLiMSMjsWJltLm",
    "role": "admin",
    "parentId": "04d032a1-c4d6-4d84-b12a-779450dce88c",
    "CompanyId": "944735b5-b8dd-42a8-8307-18ba30414e63",
    "updatedAt": "2020-02-22T13:47:16.999Z",
    "createdAt": "2020-02-22T13:47:16.999Z",
    "hierarchyLevel": 2
  }
}
```

This endpoint create an Admin for a specific company.
### HTTP Request
<span class="method-post">POST</span>`/v1/companies/:companyId/users`

<%= partial "/includes/users/requestParameters.md.erb"%>

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.


<!--
## Get a Specific User `root`
## Update a Specific User `root`
## Delete a Specific User `root`
-->

## Get Accounts from a Specific Company `root`

<%= partial "/includes/accounts/getData.md.erb"%>

This endpoint retrieves accounts from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/accounts`


### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.


<!--
## Create an Account for a Specific Company `root`
## Get a Specific Account `root`
## Update a Specific Account `root`
## Delete a Specific Account `root`
-->

## Get Contacts from a Specific Company `root`

<%= partial "/includes/contacts/getData.md.erb"%>

This endpoint retrieves contacts from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/contacts`


### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.

<!--
## Create a Contact for a Specific Company `root`
## Get a Specific Contact `root`
## Update a Specific Contact `root`
## Delete a Specific Contact `root`
-->


## Get Projects from a Specific Company `root`

<%= partial "/includes/projects/getData.md.erb"%>

This endpoint retrieves projects from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/projects`


### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.

<!--
## Create a Project for a Specific Company `root`
## Get a Specific Project `root`
## Update a Specific Project `root`
## Delete a Specific Project `root`
-->


## Get Quotations from a Specific Company `root`

<%= partial "/includes/quotations/getData.md.erb"%>

This endpoint retrieves quotations from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/quotations`


### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.

<!--
## Create a Quotation for a Specific Company `root`
## Get a Specific Quotation `root`
## Update a Specific Quotation `root`
## Delete a Specific Quotation `root`
-->


## Get Products from a Specific Company `root`

<%= partial "/includes/products/getData.md.erb"%>

This endpoint retrieves products from a specific company.
### HTTP Request
<span class="method-get">GET</span>`/v1/companies/:companyId/products`


### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Forbidden.
User  | Forbidden.

<!--
## Create a Product for a Specific Company `root`
## Get a Specific Product `root`
## Update a Specific Product `root`
## Delete a Specific Product `root`

## Get My Company

<%= partial "/includes/companies/getOne.md.erb"%>

This endpoint retrieves my company.
### HTTP Request
<span class="method-get">GET</span> `/v1/companies/me`

### Access Permission
Role | Scope
---- | -----
Root | Full permission
Admin | Full permission
User  | Full permission

<aside class="warning">
If you are not rooot, no matter the <code>&lt;companyId&gt;</code> you pass at url prameter, you can only get the company which <code>&lt;companyId&gt;</code> same as yours
</aside>

## Update My Company

<%= partial "/includes/companies/updateData.md.erb"%>

This endpoint updates my company.
### HTTP Request
<span class="method-patch">PATCH</span>`/v1/companies/me`

<%= partial "/includes/companies/requestParameters.md.erb"%>

### Access Permission
Role | Scope
---- | -----
Root | Full permission.
Admin | Can only updates company which <code>id</code> same as admin's <code>companyId</code>.
User  | Forbidden.
-->
