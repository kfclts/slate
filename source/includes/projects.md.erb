# Projects

## Get All Projects

<%= partial "/includes/projects/getData.md.erb" %>

### Query Parameters
Parameter | Default | Description
--------- | ------- | -----------
TBD | false | TBD.
TBD | true | TBD.

This endpoint retrieves all projects.
### HTTP Request
<span class="method-get">GET</span> `/v1/projects`

<%= partial "/includes/permission/getData.md.erb" %>

## Create a Project

> Example Request Body

```json
{
  "data": {
    "name": "projectA31",
    "winRate": "98%",
    "stage": "Prospecting, Qualification, Value Propostition, Price Quote, Negotiation, Close Won, Close Lost",
    "competitor": "廣達，鴻海",
    "ContactId": "00596528-decb-4687-b6cd-1e34d5940f32",
    "closdeDate": "1559927161"
  }
}
```

> Example Response Body

```json
{
  "status": {
    "status": 201,
    "message": "Created"
  },
  "data": {
    "id": "323150db-31be-415f-a757-592910a54bdc",
    "name": "projectA31",
    "winRate": "98%",
    "stage": "Prospecting, Qualification, Value Propostition, Price Quote, Negotiation, Close Won, Close Lost",
    "competitor": "廣達，鴻海",
    "totalPrice": 0,
    "cost": 0,
    "margin": 0,
    "closdeDate": "1559927161",
    "ContactId": "00596528-decb-4687-b6cd-1e34d5940f32",
    "AccountId": "63c1e0da-5cbf-4bf2-bfd6-6208de7ff3d3",
    "UserId": "3be8a975-5496-4d76-b61d-eeb913f92ffa",
    "CompanyId": "6a90770b-c6ed-4692-815a-6a45ba7594c6",
    "updatedAt": "2020-02-22T15:33:41.309Z",
    "createdAt": "2020-02-22T15:33:41.309Z"
  }
}
```

This endpoint creates a projects.
### HTTP Request
<span class="method-post">POST</span> `/v1/projects`

<%= partial "/includes/projects/requestParameters.md.erb" %>

<%= partial "/includes/permission/createData.md.erb" %>

<aside class="notice">If you are not admin, but trying to store <code>userId</code> inside request body, the server will ignore it.</aside>

<aside class="notice">In Response Body <code>accountId</code> same as <code>contact.accountId</code> </aside>
<aside class="notice">In Response Body <code>userId</code> same as <code>contact.userId</code> </aside>


## Get a Specific Project

<%= partial "/includes/projects/getOne.md.erb" %>

This endpoint retrieves a specific project.
### HTTP Request
<span class="method-get">GET</span>`/v1/projects/:projectId`

<%= partial "/includes/permission/getData.md.erb" %>

## Update a Specific Project

<%= partial "/includes/projects/updateData.md.erb" %>

This endpoint updates a specific project.
### HTTP Request
<span class="method-patch">PATCH</span>`/v1/projects/:projectId`

<%= partial "/includes/projects/getData.md.erb" %>

<%= partial "/includes/permission/updateData.md.erb" %>

<aside class="notice">If you are not admin, but trying to store <code>userId</code> inside request body, the server will ignore it.</aside>

## Delete a Specific Project

<%= partial "/includes/common/deleteResponse.md.erb" %>

This endpoint deletes a specific project.
### HTTP Request
<span class="method-delete">DELETE</span>`/v1/projects/:projectId`

<%= partial "/includes/permission/deleteData.md.erb" %>

## Get Quotations from a Specific Project

<%= partial "/includes/quotations/getData.md.erb" %>

This endpoint retrieves quotations from a specific project.
### HTTP Request
<span class="method-get">GET</span>`/v1/projects/:projectId/quotations`

<%= partial "/includes/permission/getData.md.erb" %>


## Create Updates from a Specific Project

> Example Request Body

```json
{
  "data": {
    "description": "UpdateA3"
  }
}
```

> Example Response Body

```json
{
  "status": {
    "status": 201,
    "message": "Created"
  },
  "data": {
    "id": "4a606630-61ac-4760-8bd2-4d4484918cb0",
    "description": "UpdateA3me",
    "ProjectId": "15b0ec7c-d5c8-46b2-8fd5-0ea4688f1f2c",
    "UserId": "3be8a975-5496-4d76-b61d-eeb913f92ffa",
    "updatedAt": "2020-02-22T15:47:17.137Z",
    "createdAt": "2020-02-22T15:47:17.137Z"
  }
}
```

This endpoint creates a update for a specific projects.
### HTTP Request
<span class="method-post">POST</span> `/v1/projects/:projectId/updates`

<%= partial "/includes/updates/requestParameters.md.erb" %>

<%= partial "/includes/permission/createData.md.erb" %>

<aside class="notice">If you are not admin, but trying to store <code>userId</code> inside request body, the server will ignore it.</aside>
<aside class="notice">If you have permission to read this project, In Response Body <code>userId</code> is your <code>req.userId</code> </aside>




## Get Updates from a Specific Project

> Example Response Body

```json
{
  "status": {
    "status": 200,
    "message": "OK"
  },
  "data": [
    {
      "id": "7895e927-7d5d-415e-8dcf-b6de589d664b",
      "description": "UpdateA3",
      "createdAt": "2020-02-21T09:10:08.000Z",
      "updatedAt": "2020-02-21T09:10:08.000Z",
      "User": {
        "id": "04885878-13ea-44df-bcf1-bde17c6ed59d",
        "name": "userA",
        "title": "CTO",
        "image": "https://upload.wikimedia.org/wikipedia/commons/8/89/Army_%28ROCA%29_General_Chang_Guan-chung_陸軍上將張冠群_%2820170428_總統主持「國軍重要高階幹部授勳暨晉任佈達授階典禮」_01m07s%29.jpg"
      }
    }
  ]
}
```

This endpoint retrieves updates from a specific project.
### HTTP Request
<span class="method-get">GET</span>`/v1/projects/:projectId/updates`

<%= partial "/includes/permission/getData.md.erb" %>
